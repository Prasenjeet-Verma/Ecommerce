<!DOCTYPE html>
<html>
  <head>
    <title>Pending Orders</title>
    <link rel="stylesheet" href="/css/admin-newoder.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <div
      class="sidebar-overlay"
      id="sidebarOverlay"
      onclick="toggleSidebar()"
    ></div>

    <header class="mobile-header">
      <span style="font-weight: 800; font-size: 1.2rem"
        ><%-admin.username%></span
      >
      <i
        class="fa-solid fa-bars"
        style="font-size: 1.5rem; cursor: pointer"
        onclick="toggleSidebar()"
      ></i>
    </header>

    <%- include("../partials/adminNavBar") %>

    <main class="main-content">
      <h1>ðŸ“¦ Pending Shipments</h1>
      <p>Orders which are confirmed but not delivered yet</p>

      <table>
        <thead>
          <tr>
            <th>Order ID</th>
            <th>User</th>
            <th>Products</th>
            <th>Total</th>
            <th>Payment</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>

        <tbody>
          <% if(orders.length === 0){ %>
          <tr>
            <td colspan="7" style="text-align: center; padding: 20px">
              No Pending Orders
            </td>
          </tr>
          <% } %> <% orders.forEach(order => { %>
          <tr>
            <td>#<%= order._id.toString().slice(-6) %></td>

            <td>
              <%= order.user?.username || "Guest" %><br />
              <small><%= order.user?.phoneNo || order.mobile %></small>
            </td>

            <td>
              <% order.items.forEach(item => { %>
              <div style="display: flex; gap: 10px; margin-bottom: 5px">
                <img src="<%= item.product.images[0] %>" width="40" />
                <span> <%= item.product.title %> (x<%= item.qty %>) </span>
              </div>
              <% }) %>
            </td>

            <td>â‚¹<%= order.totalAmount %></td>

            <td>
              <%= order.paymentMethod %> <br />
              <small> <%= order.paymentStatus %> </small>
            </td>

            <td>
              <% if(order.orderStatus === "Confirmed"){ %>
              <span style="color: orange; font-weight: bold">Pending</span>
              <% } %> <% if(order.orderStatus === "Shipped"){ %>
              <span style="color: blue; font-weight: bold">Shipped</span>
              <% } %>
            </td>

            <td>
              <%= new Date(order.createdAt).toLocaleDateString("en-IN") %>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </main>
    <script src="/js/shoesProduct.js"></script>
  </body>
</html>
