<!DOCTYPE html>
<html>
  <head>
    <title>Total Products</title>
    <link rel="stylesheet" href="/css/admin-newoder.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div
      class="sidebar-overlay"
      id="sidebarOverlay"
      onclick="toggleSidebar()"
    ></div>

    <header class="mobile-header">
      <span style="font-weight: 800; font-size: 1.2rem"
        ><%-admin.username%></span
      >
      <i
        class="fa-solid fa-bars"
        style="font-size: 1.5rem; cursor: pointer"
        onclick="toggleSidebar()"
      ></i>
    </header>

    <%- include('../partials/adminNavBar') %>

    <main class="main-content">
      <h1>Total Products</h1>

      <!-- COUNTERS -->
      <div style="display: flex; gap: 20px; margin: 20px 0">
        <div class="glass-panel">Total: <b><%= totalProducts %></b></div>
        <div class="glass-panel">
          Active: <b style="color: green"><%= activeProducts %></b>
        </div>
        <div class="glass-panel">
          Inactive: <b style="color: red"><%= inactiveProducts %></b>
        </div>
      </div>

      <!-- FILTER -->
      <div style="margin-bottom: 20px">
        <a href="/totalproducts?filter=all">
          <button class="<%= filter==='all'?'active-btn':'' %>">All</button>
        </a>

        <a href="/totalproducts?filter=active">
          <button class="<%= filter==='active'?'active-btn':'' %>">
            Active
          </button>
        </a>

        <a href="/totalproducts?filter=inactive">
          <button class="<%= filter==='inactive'?'active-btn':'' %>">
            Inactive
          </button>
        </a>
      </div>

      <!-- PRODUCT TABLE -->
      <table>
        <thead>
          <tr>
            <th>Image</th>
            <th>Title</th>
            <th>Category</th>
            <th>Price</th>
            <th>Offer</th>
            <th>Stock</th>
            <th>Status</th>
          </tr>
        </thead>

        <tbody>
          <% products.forEach(p => { %>
          <tr>
            <td>
              <img
                src="<%= p.images[0] %>"
                style="
                  width: 60px;
                  height: 60px;
                  object-fit: cover;
                  border-radius: 8px;
                "
              />
            </td>

            <td><%= p.title %></td>
            <td style="text-transform: capitalize"><%= p.category %></td>

            <td>₹<%= p.price %></td>

            <td>
              <% if(p.offerPercentage > 0){ %> ₹<%= p.offerPrice %> (<%=
              p.offerPercentage %>% OFF) <% } else { %> — <% } %>
            </td>

            <td><%= p.totalStock %></td>

            <td>
              <% if(p.status === "active"){ %>
              <span style="color: green; font-weight: bold">Active</span>
              <% } else { %>
              <span style="color: red; font-weight: bold">Inactive</span>
              <% } %>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </main>
    <script src="/js/shoesProduct.js"></script>
  </body>
</html>
